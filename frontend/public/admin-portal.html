<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CornerThought - Admin Portal</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<header class="toolbar">
    <div class="company-name">CornerThought</div>
    <div class="user-info">
        <span>Yash Nigam</span>
        <button class="logout-button">Logout</button>
    </div>
</header>

<div class="admin-dashboard-layout">
    <aside class="sidebar">
        <nav class="main-nav">
            <a href="#" class="nav-item active" data-view="organizations"><i class="fas fa-building"></i> Organizations</a>
            <a href="#" class="nav-item" data-view="users"><i class="fas fa-users"></i> Users</a>
            <a href="#" class="nav-item" data-view="public-projects"><i class="fas fa-folder-open"></i> Public Projects</a>
            <a href="#" class="nav-item" data-view="public-database"><i class="fas fa-database"></i> Public Database</a>
            <a href="#" class="nav-item" data-view="settings"><i class="fas fa-cog"></i> Settings</a>
            <a href="#" class="nav-item" data-view="reports"><i class="fas fa-chart-bar"></i> Reports</a>
        </nav>
    </aside>

    <main class="content-panel">
        <!-- Organizations View -->
        <div id="organizations-view" class="view-content">
            <h2>Organizations Management</h2>
            <div class="controls">
                <button class="add-organization-button">Add New Organization</button>
                <input type="text" placeholder="Search..." class="search-input">
            </div>

            <table class="organizations-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Admin Email</th>
                        <th>Users Allotted</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

            <div class="pagination">
                <button>Previous</button>
                <span>1</span> <span>2</span> <span>3</span>
                <button>Next</button>
            </div>
        </div>

        <!-- Public Projects View -->
        <div id="public-projects-view" class="view-content" style="display: none;">
            <h2>Public Projects</h2>
        </div>

        <!-- Public Database View -->
        <div id="public-database-view" class="view-content" style="display: none;">
            <h2>Public Database</h2>
            <p>Upload an Excel file to preview Issues, Successes, and their Causes.</p>

            <div id="publicDbDropzone" class="file-dropzone">
                <input
                    type="file"
                    id="publicDbFileInput"
                    accept=".xlsx,.xls"
                    style="display: none;"
                >
                <div class="file-dropzone-content">
                    <i class="fas fa-file-excel"></i>
                    <p><strong>Click to choose an Excel file</strong> or drag and drop it here</p>
                    <p class="file-dropzone-hint">Supported formats: .xlsx, .xls</p>
                </div>
            </div>

            <div id="publicDbMessage" class="upload-message" aria-live="polite"></div>
        </div>
    </main>
</div>

<!-- Add Organization Popup -->
<div id="addOrgModal" class="modal">
    <div class="modal-content collapsible-form">
        <div class="form-toggle" id="addOrgToggle">
            <i class="fas fa-chevron-right" id="addOrgToggleIcon"></i>
        </div>
        <div class="form-content">
            <span class="close-button">&times;</span>
            <h3>Add New Organization</h3>
            <form id="addOrgForm">
                <div class="input-group">
                    <label for="orgName">Organization Name</label>
                    <input type="text" id="orgName" name="orgName" required>
                </div>
                <div class="input-group">
                    <label for="orgType">Type</label>
                    <input type="text" id="orgType" name="orgType" required>
                </div>
                <div class="input-group">
                    <label for="orgAdminFirstName">Admin First Name</label>
                    <input type="text" id="orgAdminFirstName" name="orgAdminFirstName">
                </div>
                <div class="input-group">
                    <label for="orgAdminLastName">Admin Last Name</label>
                    <input type="text" id="orgAdminLastName" name="orgAdminLastName">
                </div>
                <div class="input-group">
                    <label for="orgEmail">Admin Email</label>
                    <input type="email" id="orgEmail" name="orgEmail" required>
                </div>
                <div class="input-group">
                    <label for="orgUsers">Users Allotted</label>
                    <input type="number" id="orgUsers" name="orgUsers" required min="1">
                </div>
                <button type="submit" class="save-org-button">Save</button>
            </form>
        </div>
    </div>
</div>

<!-- Edit Organization Popup -->
<div id="editOrgModal" class="modal modal--center">
    <div class="modal-content">
        <span class="edit-close-button">&times;</span>
        <h3>Edit Organization</h3>
        <form id="editOrgForm">
            <div class="input-group">
                <label for="editOrgName">Organization Name</label>
                <input type="text" id="editOrgName" name="editOrgName" required>
            </div>
            <div class="input-group">
                <label for="editOrgType">Type</label>
                <input type="text" id="editOrgType" name="editOrgType" required>
            </div>
            <div class="input-group">
                <label for="editAdminFirstName">Admin First Name</label>
                <input type="text" id="editAdminFirstName" name="editAdminFirstName">
            </div>
            <div class="input-group">
                <label for="editAdminLastName">Admin Last Name</label>
                <input type="text" id="editAdminLastName" name="editAdminLastName">
            </div>
            <div class="input-group">
                <label for="editOrgEmail">Admin Email</label>
                <input type="email" id="editOrgEmail" name="editOrgEmail" required>
            </div>
            <div class="input-group">
                <label for="editOrgUsers">Users Allotted</label>
                <input type="number" id="editOrgUsers" name="editOrgUsers" required min="1">
            </div>
            <button type="submit" class="save-edit-button">Save Changes</button>
        </form>
    </div>
</div>

<!-- Public Database Preview Modal -->
<div id="publicDbPreviewModal" class="modal modal--center">
    <div class="modal-content public-db-modal-content">
        <button class="edit-close-button" id="closePublicDbPreview" aria-label="Close preview">&times;</button>
        <h3>Public Database Preview</h3>
        <div id="publicDbPreviewBody" class="public-db-preview-body">
            <!-- Entries will be injected here -->
        </div>
    </div>
</div>

<script type="module" src="js/admin-portal.js"></script>
</body>
</html>
