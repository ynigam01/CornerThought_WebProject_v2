<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CornerThought - Admin Portal</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<header class="toolbar">
    <div class="company-name">CornerThought</div>
    <div class="user-info">
        <span>Yash Nigam</span>
        <button class="logout-button">Logout</button>
    </div>
</header>

<div class="admin-dashboard-layout">
    <aside class="sidebar">
        <nav class="main-nav">
            <a href="#" class="nav-item active" data-view="organizations"><i class="fas fa-building"></i> Organizations</a>
            <a href="#" class="nav-item" data-view="users"><i class="fas fa-users"></i> Users</a>
            <a href="#" class="nav-item" data-view="public-projects"><i class="fas fa-folder-open"></i> Public Projects</a>
            <a href="#" class="nav-item" data-view="public-database"><i class="fas fa-database"></i> Public Database</a>
            <a href="#" class="nav-item" data-view="settings"><i class="fas fa-cog"></i> Settings</a>
            <a href="#" class="nav-item" data-view="reports"><i class="fas fa-chart-bar"></i> Reports</a>
        </nav>
    </aside>

    <main class="content-panel">
        <!-- Organizations View -->
        <div id="organizations-view" class="view-content">
            <h2>Organizations Management</h2>
            <div class="controls">
                <button class="add-organization-button">Add New Organization</button>
                <input type="text" placeholder="Search..." class="search-input">
            </div>

            <table class="organizations-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Admin Email</th>
                        <th>Users Allotted</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

            <div class="pagination">
                <button>Previous</button>
                <span>1</span> <span>2</span> <span>3</span>
                <button>Next</button>
            </div>
        </div>

        <!-- Public Projects View -->
        <div id="public-projects-view" class="view-content" style="display: none;">
            <h2>Public Projects</h2>
            <div class="controls">
                <button id="manageProjectTypesButton" class="public-projects-button">Manage Project Types</button>
                <button id="managePublicProjectsButton" class="public-projects-button">Manage Public Projects</button>
            </div>

            <!-- Manage Project Types panel -->
            <div id="projectTypesPanel" class="project-types-panel" style="display: none;">
                <div class="project-types-panel-header">
                    <h3>Manage Project Types</h3>
                    <button type="button" id="projectTypesBackButton" class="secondary-button">Go Back</button>
                </div>
                <form id="projectTypesForm">
                    <div class="form-group">
                        <label for="projectTypeName">Project Type</label>
                        <input type="text" id="projectTypeName" required>
                    </div>
                    <div class="form-group">
                        <label for="projectTypeIndustry">Industry</label>
                        <input type="text" id="projectTypeIndustry" required>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="public-projects-button">Save Project Type</button>
                    </div>
                </form>
            </div>

            <!-- Manage Public Projects sub-module -->
            <div id="publicProjectsManagePanel" class="project-types-panel" style="display: none;">
                <div class="project-types-panel-header">
                    <div>
                        <h3>Manage Public Projects</h3>
                        <p class="subtitle">Select and manage existing public projects.</p>
                    </div>
                    <button type="button" id="publicProjectsBackButton" class="secondary-button">Go Back</button>
                </div>
                <div class="form-group">
                    <label for="publicProjectSelect">Select Public Project</label>
                    <select id="publicProjectSelect">
                        <option value="">Select Public Project</option>
                    </select>
                </div>
                <div class="form-buttons">
                    <button type="button" id="openPublicProjectEditFromManage" class="secondary-button" style="display: none;">
                        Edit Project
                    </button>
                    <button type="button" id="openPublicProjectDetailsFromManage" class="secondary-button" style="display: none;">
                        Project Details
                    </button>
                </div>
                <!-- Project Details: Excel upload area (shown when user clicks Project Details) -->
                <div id="publicProjectDetailsUpload" style="display: none; margin-top: 16px;">
                    <p>Upload an Excel file with project details. Only .xlsx and .xls formats are accepted.</p>
                    <div class="form-group">
                        <input
                            type="file"
                            id="publicProjectDetailsFileInput"
                            accept=".xlsx,.xls"
                        >
                    </div>
                    <div class="form-buttons">
                        <button type="button" id="publicProjectDetailsValidateButton" class="secondary-button">
                            Upload Project Details
                        </button>
                    </div>
                    <div id="publicProjectDetailsStatus" class="upload-message" aria-live="polite"></div>
                </div>
                <div id="publicProjectsStatus" class="upload-message" aria-live="polite"></div>
            </div>

            <div id="publicCreateColumns" class="create-columns-wrapper">
                <div class="left-col" id="publicCreateLeftCol">
                    <form id="publicInlineCreateProjectForm" class="project-form half-width">
                        <div class="form-group">
                            <label for="publicProjectName">Project Name</label>
                            <input type="text" id="publicProjectName" required>
                        </div>
                        <div class="form-group">
                            <label for="publicProjectIndustry">Industry</label>
                            <input type="text" id="publicProjectIndustry">
                        </div>
                        <div class="form-group">
                            <label for="publicProjectType">Type</label>
                            <input type="text" id="publicProjectType" required>
                        </div>
                        <div class="form-group">
                            <label for="publicAssetType">New Asset or Existing</label>
                            <select id="publicAssetType">
                                <option value="">Select an option</option>
                                <option value="New">New</option>
                                <option value="Existing">Existing</option>
                                <option value="N/A">N/A</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="publicProjectDescription">Description</label>
                            <textarea id="publicProjectDescription"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="publicStartDate">Start Date</label>
                            <input type="date" id="publicStartDate">
                        </div>
                        <div class="form-group">
                            <label for="publicEndDate">End Date</label>
                            <input type="date" id="publicEndDate">
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="save-project-button">Create Public Project</button>
                        </div>
                    </form>
                    <div id="publicCreateSummary" class="create-summary" style="display:none;"></div>
                </div>
                <div class="right-col" id="publicCreateRightCol">
                    <!-- Only include Project Details button (no Project Team / Lessons Learned Metadata) -->
                </div>
            </div>
        </div>

        <!-- Public Database View -->
        <div id="public-database-view" class="view-content" style="display: none;">
            <h2>Public Database</h2>

            <div class="controls">
                <div class="form-group">
                    <label for="publicDbProjectSelect">Public Project</label>
                    <select id="publicDbProjectSelect">
                        <option value="">Select Public Project</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="publicDbProjectTypeSelect">Public Project Type</label>
                    <select id="publicDbProjectTypeSelect">
                        <option value="">Select Public Project Type</option>
                    </select>
                </div>
            </div>

            <p>Upload an Excel file to preview Issues, Successes, and their Causes.</p>

            <div id="publicDbDropzone" class="file-dropzone">
                <input
                    type="file"
                    id="publicDbFileInput"
                    accept=".xlsx,.xls"
                    style="display: none;"
                >
                <div class="file-dropzone-content">
                    <i class="fas fa-file-excel"></i>
                    <p><strong>Click to choose an Excel file</strong> or drag and drop it here</p>
                    <p class="file-dropzone-hint">Supported formats: .xlsx, .xls</p>
                </div>
            </div>

            <div class="form-buttons" style="margin-top: 12px;">
                <button type="button" id="publicDbRecentUploadsButton" class="secondary-button">
                    Recent Uploads
                </button>
                <button type="button" id="publicDbSearchButton" class="secondary-button">
                    Search Public Database
                </button>
            </div>

            <div id="publicDbMessage" class="upload-message" aria-live="polite"></div>
        </div>
    </main>
</div>

<!-- Add Organization Popup -->
<div id="addOrgModal" class="modal">
    <div class="modal-content collapsible-form">
        <div class="form-toggle" id="addOrgToggle">
            <i class="fas fa-chevron-right" id="addOrgToggleIcon"></i>
        </div>
        <div class="form-content">
            <span class="close-button">&times;</span>
            <h3>Add New Organization</h3>
            <form id="addOrgForm">
                <div class="input-group">
                    <label for="orgName">Organization Name</label>
                    <input type="text" id="orgName" name="orgName" required>
                </div>
                <div class="input-group">
                    <label for="orgType">Type</label>
                    <input type="text" id="orgType" name="orgType" required>
                </div>
                <div class="input-group">
                    <label for="orgAdminFirstName">Admin First Name</label>
                    <input type="text" id="orgAdminFirstName" name="orgAdminFirstName">
                </div>
                <div class="input-group">
                    <label for="orgAdminLastName">Admin Last Name</label>
                    <input type="text" id="orgAdminLastName" name="orgAdminLastName">
                </div>
                <div class="input-group">
                    <label for="orgEmail">Admin Email</label>
                    <input type="email" id="orgEmail" name="orgEmail" required>
                </div>
                <div class="input-group">
                    <label for="orgUsers">Users Allotted</label>
                    <input type="number" id="orgUsers" name="orgUsers" required min="1">
                </div>
                <button type="submit" class="save-org-button">Save</button>
            </form>
        </div>
    </div>
</div>

<!-- Edit Organization Popup -->
<div id="editOrgModal" class="modal modal--center">
    <div class="modal-content">
        <span class="edit-close-button">&times;</span>
        <h3>Edit Organization</h3>
        <form id="editOrgForm">
            <div class="input-group">
                <label for="editOrgName">Organization Name</label>
                <input type="text" id="editOrgName" name="editOrgName" required>
            </div>
            <div class="input-group">
                <label for="editOrgType">Type</label>
                <input type="text" id="editOrgType" name="editOrgType" required>
            </div>
            <div class="input-group">
                <label for="editAdminFirstName">Admin First Name</label>
                <input type="text" id="editAdminFirstName" name="editAdminFirstName">
            </div>
            <div class="input-group">
                <label for="editAdminLastName">Admin Last Name</label>
                <input type="text" id="editAdminLastName" name="editAdminLastName">
            </div>
            <div class="input-group">
                <label for="editOrgEmail">Admin Email</label>
                <input type="email" id="editOrgEmail" name="editOrgEmail" required>
            </div>
            <div class="input-group">
                <label for="editOrgUsers">Users Allotted</label>
                <input type="number" id="editOrgUsers" name="editOrgUsers" required min="1">
            </div>
            <button type="submit" class="save-edit-button">Save Changes</button>
        </form>
    </div>
</div>

<!-- Edit Public Project Modal -->
<div id="publicProjectEditModal" class="modal modal--center">
    <div class="modal-content public-project-edit-modal-content">
        <button class="edit-close-button" id="closePublicProjectEdit" aria-label="Close edit form">&times;</button>
        <h3>Edit Public Project</h3>
        <form id="publicProjectEditForm">
            <div class="input-group">
                <label for="editPublicProjectName">Project Name</label>
                <input type="text" id="editPublicProjectName" required>
            </div>
            <div class="input-group">
                <label for="editPublicProjectIndustry">Industry</label>
                <input type="text" id="editPublicProjectIndustry">
            </div>
            <div class="input-group">
                <label for="editPublicProjectType">Type</label>
                <input type="text" id="editPublicProjectType" required>
            </div>
            <div class="input-group">
                <label for="editPublicAssetType">New Asset or Existing</label>
                <select id="editPublicAssetType">
                    <option value="">Select an option</option>
                    <option value="New">New</option>
                    <option value="Existing">Existing</option>
                    <option value="N/A">N/A</option>
                </select>
            </div>
            <div class="input-group">
                <label for="editPublicProjectDescription">Description</label>
                <textarea id="editPublicProjectDescription"></textarea>
            </div>
            <div class="input-group">
                <label for="editPublicStartDate">Start Date</label>
                <input type="date" id="editPublicStartDate">
            </div>
            <div class="input-group">
                <label for="editPublicEndDate">End Date</label>
                <input type="date" id="editPublicEndDate">
            </div>
            <div class="modal-actions">
                <button type="button" id="deletePublicProjectBtn">Delete Project</button>
                <button type="submit">Save Edits</button>
            </div>
        </form>
    </div>
</div>

<!-- Public Database Preview Modal -->
<div id="publicDbPreviewModal" class="modal modal--center">
    <div class="modal-content public-db-modal-content">
        <button class="edit-close-button" id="closePublicDbPreview" aria-label="Close preview">&times;</button>
        <h3>Public Database Preview</h3>
        <div id="publicDbPreviewBody" class="public-db-preview-body">
            <!-- Entries will be injected here -->
        </div>
    </div>
</div>

<script type="module" src="js/admin-portal.js"></script>
</body>
</html>
