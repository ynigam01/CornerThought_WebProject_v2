<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CornerThought - User Portal</title>

    <!-- CSS -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <!-- Header -->
    <header class="toolbar">
        <a href="#home" class="company-name" id="homeLink">CornerThought</a>
        <div class="user-info">
            <button class="create-project-button">Create New Project</button>
            <button class="add-data-button">Add Data</button>
            <button class="logout-button">Logout</button>
        </div>
    </header>

    <!-- Layout -->
    <div class="admin-dashboard-layout">
        <aside class="sidebar">
            <nav class="main-nav">
                <a href="#" class="nav-item active">
                    <i class="fas fa-folder"></i> My Projects
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-search"></i> Search Projects
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-globe"></i> General Search
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-cog"></i> Organization Settings
                </a>
            </nav>
        </aside>

        <main class="main-content">
            <section id="homeView" class="view">
                <h1>Welcome, User</h1>

                <!-- Display area for Issue/Success entries -->
                <div id="issueSuccessDisplay" class="display-area" style="display: none;"></div>

                <!-- Forms will be injected here dynamically -->
                <div id="projectFormContainer"></div>
            </section>

            <section id="searchView" class="view" hidden></section>

            <section id="projectsView" class="view" hidden>
                <h1>My Projects</h1>
                <div class="projects-search">
                    <label for="projectSearch">Select or search a project</label>
                    <input id="projectSearch" class="search-input" list="projectsList" placeholder="Start typing to search...">
                    <datalist id="projectsList">
                        <option value="Project Apollo">
                        <option value="Project Borealis">
                        <option value="Project Catalyst">
                        <option value="Project Delta">
                        <option value="Project Endeavor">
                    </datalist>
                </div>
            </section>

            <section id="createView" class="view" hidden>
                <h2>Create New Project</h2>
                <p>Use the form to create a new project.</p>
            </section>

            <section id="addDataView" class="view" hidden>
                <h2>Add Data</h2>
                <div id="addDataDisplay" class="display-area" style="display: none;"></div>
            </section>

            <template id="orgSettingsTemplate">
                <section id="orgView" class="view">
                    <!-- Default Organization Settings summary -->
                    <div id="orgMainSummary">
                        <h2>Number of Users: <span id="userCount">0</span></h2>
                        <h3>Manage Users</h3>
                        <div class="org-users-actions">
                            <button id="addNewUserButton">Add New User</button>
                            <button id="manageUsersButton">Manage Users</button>
                        </div>
                        <h3>Manage Projects</h3>
                        <div class="org-projects-actions">
                            <button id="manageProjectsButton">Manage Projects</button>
                        </div>
                    </div>

                    <!-- Manage Projects & Project Types module (shown when user clicks Manage Projects) -->
                    <div id="orgProjectsPanel" class="project-types-panel" style="display: none;">
                        <div class="project-types-panel-header">
                            <div>
                                <h3>Manage Projects &amp; Project Types</h3>
                                <p class="subtitle">Create new project types that are specific to your organization.</p>
                            </div>
                            <button type="button" id="orgProjectsBackButton" class="secondary-button">Go Back</button>
                        </div>
                        <form id="orgProjectTypesForm">
                            <div class="form-group">
                                <label for="orgProjectTypeName">Project Type</label>
                                <input type="text" id="orgProjectTypeName" required>
                            </div>
                            <div class="form-buttons">
                                <button type="submit" class="public-projects-button">Save Project Type</button>
                            </div>
                        </form>
                    </div>
                </section>
            </template>
        </main>
    </div>

    <!-- Edit Modal -->
    <div class="edit-modal" id="editModal">
        <div class="edit-modal-content">
            <button class="close-edit-button" id="closeEditModal">&times;</button>
            <h3 id="editModalTitle">Edit Text</h3>
            <textarea id="editTextarea" placeholder="Enter text here..."></textarea>
            <div class="edit-modal-buttons">
                <button class="cancel-edit-button" id="cancelEdit">Cancel</button>
                <button class="save-edit-button" id="saveEdit">Change</button>
            </div>
        </div>
    </div>

    <!-- JS (always placed at end for performance) -->
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script type="module" src="js/user-portal.js"></script>
</body>
</html>
